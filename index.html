<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Nosso Album</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
      background-color: #0a0a0a;
    }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 12px;
      height: 12px;
      background: white;
      cursor: pointer;
      border-radius: 50%;
    }
    input[type="range"]::-moz-range-thumb {
      width: 12px;
      height: 12px;
      background: white;
      cursor: pointer;
      border-radius: 50%;
      border: none;
    }

    @keyframes pulse {
      0%, 100% { transform: scaleY(0.5); }
      50% { transform: scaleY(1); }
    }
    .animate-pulse-bar {
      animation: pulse 0.8s ease-in-out infinite;
    }

    ::-webkit-scrollbar {
      width: 8px;
    }
    ::-webkit-scrollbar-track {
      background: #171717;
    }
    ::-webkit-scrollbar-thumb {
      background: #404040;
      border-radius: 4px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: #525252;
    }

    @keyframes slideIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .slide-in {
      animation: slideIn 0.3s ease-out;
    }
  </style>
</head>
<body class="min-h-screen bg-violet-400 flex items-center justify-center p-4">
  <div class="w-full max-w-md">
    <!-- Player Principal -->
    <div id="player" class="bg-neutral-900 rounded-2xl overflow-hidden shadow-2xl">
      <!-- Capa -->
      <div class="relative p-4">
        <div
          id="artwork-container"
          class="relative aspect-square rounded-xl overflow-hidden cursor-pointer"
        >
          <img id="artwork" class="w-full h-full object-cover" />
          <div id="glare" class="absolute inset-0 pointer-events-none opacity-0"></div>
        </div>
      </div>

      <!-- Informações -->
      <div class="px-6 pt-4 pb-2">
        <h2 id="title" class="text-white text-xl font-semibold tracking-tight"></h2>
        <p id="artist" class="text-neutral-400 text-sm mt-1"></p>
      </div>

      <!-- Barra de Progresso -->
      <div class="px-6 pb-4">
        <div class="flex items-center gap-3">
          <span id="current-time" class="text-neutral-500 text-xs font-mono">0:00</span>
          <div id="progress-container" class="flex-1 h-1 bg-neutral-800 rounded-full cursor-pointer relative group">
            <div id="progress" class="absolute h-full bg-white rounded-full"></div>
            <div id="progress-thumb" class="absolute top-1/2 -translate-y-1/2 w-3 h-3 bg-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity"></div>
          </div>
          <span id="duration" class="text-neutral-500 text-xs font-mono">0:00</span>
        </div>
      </div>

      <!-- Controles -->
      <div class="px-6 pb-6">
        <div class="flex items-center justify-center gap-4 mb-4">
          <button id="prev-btn" class="text-neutral-400 hover:text-white transition-colors">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/></svg>
          </button>
          <button id="play-btn" class="w-14 h-14 rounded-full bg-white hover:bg-neutral-200 flex items-center justify-center transition-colors">
            <svg id="play-icon" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
            <svg id="pause-icon" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" style="display:none;"><path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/></svg>
          </button>
          <button id="next-btn" class="text-neutral-400 hover:text-white transition-colors">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M16 18h2V6h-2zm-11-6l8.5-6v12z"/></svg>
          </button>
        </div>

        <!-- Controles secundários -->
        <div class="flex items-center justify-between">
          <div class="flex items-center gap-3">
            <button id="repeat-btn" class="text-neutral-500 hover:text-neutral-300 transition-colors">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M17 1l4 4-4 4"/><path d="M3 11V9a4 4 0 0 1 4-4h14"/><path d="M7 23l-4-4 4-4"/><path d="M21 13v2a4 4 0 0 1-4 4H3"/>
              </svg>
              <span id="repeat-label" class="absolute text-[10px] font-bold" style="top:4px; left:5px; display:none;">1</span>
            </button>
            <button id="shuffle-btn" class="text-neutral-500 hover:text-neutral-300 transition-colors">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M16 3h5v5"/><path d="M4 20L21 3"/><path d="M21 16v5h-5"/><path d="M15 15l6 6"/><path d="M4 4l5 5"/>
              </svg>
            </button>
          </div>

          <div class="flex items-center gap-3">
            <button id="lyrics-btn" class="text-neutral-500 hover:text-white transition-colors">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/>
              </svg>
            </button>
            <button id="playlist-btn" class="text-neutral-500 hover:text-white transition-colors">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3.01" y2="6"/><line x1="3" y1="12" x2="3.01" y2="12"/><line x1="3" y1="18" x2="3.01" y2="18"/>
              </svg>
            </button>
            <div class="flex items-center gap-2">
              <button id="volume-btn" class="text-neutral-500 hover:text-white transition-colors">
                <svg id="volume-icon-high" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14"/>
                </svg>
                <svg id="volume-icon-muted" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:none;">
                  <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><line x1="23" y1="9" x2="17" y2="15"/><line x1="17" y1="9" x2="23" y2="15"/>
                </svg>
              </button>
              <input id="volume-slider" type="range" min="0" max="1" step="0.01" value="0.7" class="w-16 h-1 rounded-lg appearance-none cursor-pointer" />
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Playlist -->
    <div id="playlist-panel" class="mt-4 bg-neutral-900 rounded-2xl overflow-hidden shadow-2xl slide-in" style="display:none;">
      <div class="flex items-center justify-between px-6 py-4 border-b border-neutral-800">
        <h3 class="text-white font-semibold">Playlist</h3>
        <button id="close-playlist" class="text-neutral-400 hover:text-white transition-colors">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      <div id="playlist-list" class="max-h-80 overflow-y-auto"></div>
    </div>

    <!-- Letras -->
    <div id="lyrics-panel" class="mt-4 bg-neutral-900 rounded-2xl overflow-hidden shadow-2xl slide-in" style="display:none;">
      <div class="flex items-center justify-between px-6 py-4 border-b border-neutral-800">
        <h3 class="text-white font-semibold">Letra</h3>
        <button id="close-lyrics" class="text-neutral-400 hover:text-white transition-colors">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      <div id="lyrics-text" class="px-6 py-6 max-h-80 overflow-y-auto text-neutral-300 whitespace-pre-line leading-relaxed text-sm"></div>
    </div>

    <!-- Áudio (invisível) -->
    <audio id="audio"></audio>
  </div>

  <script>
    // ========== CONFIGURAÇÃO DAS MÚSICAS ==========
    const TRACKS = [
      {
        id: 1,
        title: "Casa",
        artist: "Vivi",
        artwork: "./assets/artwork/Casa.png",
        audio: "./assets/audio/Casa.mp3",
        lyrics: `Como eu iria saber
Que eu e você
fosse encontrar o amor
Você não acreditô
Mas isso deu certo
Tem teu cheiro em meu cobertô
  
A gente se escolhe todo dia  
E dias te prometo pelo menos um milhão
Não há nada mais lindo
que acordar ver teu sorriso
Partilhar metade do meu coração

Mesmo que não venha mais ninguém,
Eu não me importo 
Por que casa é qualquer lugar
em que eu esteja com você`
      },
      {
        id: 2,
        title: "Te amo tudo que dá",
        artist: "Vivi",
        artwork: "./assets/artwork/amotudo.png",
        audio: "./assets/audio/teamotudo.mp3",
        lyrics: `When the moonlight calls my name
I think of all we shared
Nothing will ever be the same
The way that you once cared

Lost in midnight dreams of you
Memories fade to gray
Hope that somehow dreams come true
And you'll come back someday`
      },
      {
        id: 3,
        title: "Abecedablio",
        artist: "Vivi",
        artwork: "./assets/artwork/Abece.png",
        audio: "./assets/audio/Abecedáblio.mp3",
        lyrics: `Eu gosto de você, não
Você é legal, talvez
Te adoro deve ser mais certo
Eu gosto de ficar contigo
Mas não é como amigo
Meu Deus, me ajuda, pois

Não sei, como vou eu vou dizer
que eu te quero
Talvez, eu comece a inventar palavras
E você se vira pra entender
Que eu abecedáblio por você

Será que só implicar ja basta
ou se te chamar de besta, quem sabe
dizer te odeio já deixe implícito que,
eu quero compromisso, mas
se você não entender
meu Deus, me ajude, pois

Não sei, como vou eu vou dizer
que eu te quero
Talvez, eu comece a inventar palavras
E você se vira pra entender
Que eu abecedáblio por você

Um eu te amo serve? será que já dá pra usar?
Ou é melhor dizer que eu tô afim
Dizer que tudo é mágico
Quando eu tô do seu lado
Quero que o momento nunca chegue ao fim, pois

Não sei, como vou eu vou dizer
que eu te quero
Talvez, eu comece a inventar palavras
E você se vira pra entender
Que eu abecedáblio por você

Não sei, como vou eu vou dizer
que eu te quero
Talvez, eu comece a inventar palavras
E você se vira pra entender
Que eu abecedáblio por você`
      },
      {
        id: 4,
        title: "Princeso",
        artist: "Vivi",
        artwork: "./assets/artwork/Princesoimg.png",
        audio: "./assets/audio/Princeso.mp3",
        lyrics: `Me dói, pensar em outra vida
Que não fosse tão bonita, quanto acordar
Com nossa conchinha, até se atrasar
Um encaixe perfeito, eu na conchinha de dentro
Ai ai eu não, não trocaria nada no mundo

Me dói, pensar em outra vida
Onde eu não poderia, nem cochilar
Deitado no seu colo, sem você me acordar
E dizer pra eu me aprumar
Ai ai e não, não me chamasse de princeso

Nem me faça pensar em outra vida
Em que eu não poderia, rebolar a minha bundinha
Enquanto você me pede pra continuar

Nem me faça pensar em outra vida
Em que eu não poderia, rebolar a minha bundinha
Enquanto você me pede pra continuar

Me dói, pensar em outra vida
Em que talvez eu deveria, ir no banheiro mijar
Sem ter que sentar, e sem poder confessar que
é muito melhor que fazer em pé
Ai ai eu não, não trocaria nada no mundo

Nem me faça pensar em outra vida
Em que eu não poderia, rebolar a minha bundinha
Enquanto você me pede pra continuar

Nem me faça pensar em outra vida
Em que eu não poderia, rebolar a minha bundinha
Enquanto você me pede pra continuar`
      },
      {
        id: 5,
        title: "Thico",
        artist: "Vivi",
        artwork: "./assets/artwork/Thico.png",
        audio: "./assets/audio/Thico.mp3",
        lyrics: `Amanheceu, daqui já da pra escutar
As patinhas a saltitar
Tiquinho quer entrar
Não há, nada mais puro, não
Tem todo o meu coração
Pra sempre vou te amar

Fez, parte do que eu me tornei
Todo o amor que eu dei
Aprendi com você
Mas, você não veio pra sofrer
Então teve que partir

Faz parte de mim, vou sempre lembrar
Eu espero que possa sentir meu amor
De onde você está

Faz parte de mim, vou sempre lembrar
Eu espero que possa sentir meu amor
De onde você está`
      },
      {
        id: 6,
        title: "Dejavu",
        artist: "Vivi",
        artwork: "./assets/artwork/Dejavu.png",
        audio: "./assets/audio/Dejavu_1.mp3",
        lyrics: `O grande dia vai ser dejavu
Já que eu já te imaginei de véu
Assim que te vi pela primeira vez
Já que o meu sim sempre foi teu
Meu bem, eu te espero no altar

Vem, e me olha nos olhos
Que eu não vejo a hora
De poder te beijar
E dizer, que eu vou envelhecer
ao seu lado

Nem dá, pra acreditar que lá vem
A noiva que eu sempre sonhei
Mila, eu prometo te amar
A vida inteira e além

Nem dá, pra acreditar que lá vem
A noiva que eu sempre sonhei
Mila, eu prometo te amar
A vida inteira e além

Lembro, que minha vida era só te desejar
Então tudo veio a calhar
Não sei se destino ou Deus
Eu só sei que se depender de mim
A gente nunca vai dizer adeus

Vem, e me olha nos olhos
Que eu não vejo a hora
De poder te beijar
E dizer, que eu vou envelhecer
ao seu lado

Nem dá, pra acreditar que lá vem
A noiva que eu sempre sonhei
Mila, eu prometo te amar
A vida inteira e além

Nem dá, pra acreditar que lá vem
A noiva que eu sempre sonhei
Mila, eu prometo te amar
A vida inteira e além`
      },
      {
        id: 7,
        title: "Toda Beleza do Mundo",
        artist: "Vivi",
        artwork: "./assets/artwork/Todabeleza.png",
        audio: "./assets/audio/Todabeleza_1.mp3",
        lyrics: `Toda beleza do mundo
Mora na luz dos teus olhos
Da cor do mel ao sol
Grandes até afinar ao sorriso

Contraste perfeito
Entre a finura do teu rosto
E ternura da tua boca
Que roubo um beijo só de olhar

(Toda beleza do mundo)
(Toda beleza do mundo)

Você não me deixa escolha
Faz de mim uma mariposa
Perdido e atraído pela tua pele clara
Êmulo a luz da lua

Infinita sensação da carícia
Dos pelos do teu braço
A maciez da sua pele
Saudoso vício em te ver nua

(Toda beleza do mundo)
(Toda beleza do mundo)

Cada curva do seu rio
Desagua em mim em quase lágrimas
Nos nós na minha garganta
A emoção, em te vislumbrar

Mas, não me contento com o vislumbre
Sou agente ativo da nossa história
Faço desse poema um cortejo
Por presenciar em testemunho
Toda beleza do mundo

(Toda beleza do mundo)
(Todo beleza do mundo)`
      },
      {
        id: 8,
        title: "Era Mesmo Amor",
        artist: "Vivi",
        artwork: "./assets/artwork/Eramesmo.png",
        audio: "./assets/audio/eramesmoamor.mp3",
        lyrics: `Quem diria que
No caos de mil versões 
Que poderiam acontecer
A gente se encontrar

Eu, caído aos seus pés 
Você nunca tentou
Bem que tentaram despertar
A gente ficou

[Refrão]
Nada poderia
Nos preparar para o que viria
O tempo revelou
Que era mesmo amor

Nós, de coração aberto
A conhecer o amor
Poderia dar certo
A gente pensou

Mas, só te quero por perto
Por que não ser amigos
Poderia dar certo
A gente pensou

[Refrão]
Nada poderia
Nos preparar para o que viria
O tempo revelou
Que era mesmo amor

Já, desistindo do amor
Você me revelou
Que isso ia dar certo
De coração aberto

Hoje, você sobe no altar
Eu seguro pra não chorar
Lembrando de tudo que passô
A história do nosso amô

[Refrão]
Nada poderia
Nos preparar para o que viria
O tempo revelou
Que era mesmo amor

[Refrão]
Nada poderia
Nos preparar para o que viria
O tempo revelou
Que era mesmo amor`
      },
    ];

    // ========== ELEMENTOS ==========
    const audio = document.getElementById('audio');
    const playBtn = document.getElementById('play-btn');
    const playIcon = document.getElementById('play-icon');
    const pauseIcon = document.getElementById('pause-icon');
    const prevBtn = document.getElementById('prev-btn');
    const nextBtn = document.getElementById('next-btn');
    const progressBar = document.getElementById('progress');
    const progressContainer = document.getElementById('progress-container');
    const progressThumb = document.getElementById('progress-thumb');
    const currentTimeEl = document.getElementById('current-time');
    const durationEl = document.getElementById('duration');
    const artworkImg = document.getElementById('artwork');
    const titleEl = document.getElementById('title');
    const artistEl = document.getElementById('artist');
    const artworkContainer = document.getElementById('artwork-container');
    const glare = document.getElementById('glare');
    const volumeSlider = document.getElementById('volume-slider');
    const volumeBtn = document.getElementById('volume-btn');
    const volumeIconHigh = document.getElementById('volume-icon-high');
    const volumeIconMuted = document.getElementById('volume-icon-muted');
    const repeatBtn = document.getElementById('repeat-btn');
    const repeatLabel = document.getElementById('repeat-label');
    const shuffleBtn = document.getElementById('shuffle-btn');
    const playlistBtn = document.getElementById('playlist-btn');
    const lyricsBtn = document.getElementById('lyrics-btn');
    const playlistPanel = document.getElementById('playlist-panel');
    const lyricsPanel = document.getElementById('lyrics-panel');
    const closePlaylist = document.getElementById('close-playlist');
    const closeLyrics = document.getElementById('close-lyrics');
    const playlistList = document.getElementById('playlist-list');
    const lyricsText = document.getElementById('lyrics-text');

    // ========== ESTADO ==========
    let currentTrackIndex = 0;
    let isPlaying = false;
    let repeatMode = 'off'; // 'off', 'all', 'one'
    let shuffleMode = false;
    let isMuted = false;

    // ========== FUNÇÕES ==========
    function formatTime(seconds) {
      if (isNaN(seconds)) return '0:00';
      const mins = Math.floor(seconds / 60);
      const secs = Math.floor(seconds % 60);
      return `${mins}:${secs.toString().padStart(2, '0')}`;
    }

    function loadTrack(index) {
      const track = TRACKS[index];
      audio.src = track.audio;
      artworkImg.src = track.artwork;
      titleEl.textContent = track.title;
      artistEl.textContent = track.artist;
      lyricsText.textContent = track.lyrics || 'No lyrics available for this track.';

      // Reset progress
      progressBar.style.width = '0%';
      progressThumb.style.left = '0%';
      currentTimeEl.textContent = '0:00';
    }

    function togglePlay() {
      if (isPlaying) {
        audio.pause();
      } else {
        audio.play().catch(e => console.warn("Autoplay blocked:", e));
      }
      isPlaying = !isPlaying;
      updatePlayButton();
    }

    function updatePlayButton() {
      if (isPlaying) {
        playIcon.style.display = 'none';
        pauseIcon.style.display = 'block';
      } else {
        playIcon.style.display = 'block';
        pauseIcon.style.display = 'none';
      }
    }

    function playTrack(index) {
      currentTrackIndex = index;
      loadTrack(index);
      isPlaying = true;
      updatePlayButton();
      audio.play().catch(e => console.warn("Autoplay blocked:", e));
    }

    function nextTrack() {
      let nextIndex;
      if (shuffleMode) {
        nextIndex = Math.floor(Math.random() * TRACKS.length);
      } else {
        nextIndex = (currentTrackIndex + 1) % TRACKS.length;
      }
      playTrack(nextIndex);
    }

    function prevTrack() {
      if (audio.currentTime > 3) {
        audio.currentTime = 0;
      } else {
        const prevIndex = currentTrackIndex === 0 ? TRACKS.length - 1 : currentTrackIndex - 1;
        playTrack(prevIndex);
      }
    }

    function toggleRepeat() {
      const modes = ['off', 'all', 'one'];
      const currentIndex = modes.indexOf(repeatMode);
      repeatMode = modes[(currentIndex + 1) % modes.length];
      repeatBtn.className = repeatBtn.className.replace(/text-white|text-neutral-500/g, '');
      if (repeatMode !== 'off') {
        repeatBtn.classList.add('text-white');
      } else {
        repeatBtn.classList.add('text-neutral-500');
      }
      repeatLabel.style.display = repeatMode === 'one' ? 'block' : 'none';
    }

    function toggleShuffle() {
      shuffleMode = !shuffleMode;
      shuffleBtn.classList.toggle('text-white', shuffleMode);
    }

    function toggleMute() {
      isMuted = !isMuted;
      audio.muted = isMuted;
      volumeIconHigh.style.display = isMuted ? 'none' : 'block';
      volumeIconMuted.style.display = isMuted ? 'block' : 'none';
    }

    function handleMouseMove(e) {
      const rect = artworkContainer.getBoundingClientRect();
      const x = (e.clientX - rect.left) / rect.width;
      const y = (e.clientY - rect.top) / rect.height;

      const tiltX = (y - 0.5) * -20;
      const tiltY = (x - 0.5) * 20;
      artworkContainer.style.transform = `perspective(1000px) rotateX(${tiltX}deg) rotateY(${tiltY}deg)`;
      glare.style.opacity = '1';
      glare.style.background = `radial-gradient(circle at ${x * 100}% ${y * 100}%, rgba(255,255,255,0.3) 0%, transparent 50%)`;
    }

    function handleMouseLeave() {
      artworkContainer.style.transform = 'perspective(1000px) rotateX(0deg) rotateY(0deg)';
      glare.style.opacity = '0';
    }

    function updateProgress() {
      const percent = (audio.currentTime / audio.duration) * 100;
      progressBar.style.width = `${percent}%`;
      progressThumb.style.left = `${percent}%`;
      currentTimeEl.textContent = formatTime(audio.currentTime);
    }

    function setProgress(e) {
      const width = progressContainer.clientWidth;
      const clickX = e.offsetX;
      const duration = audio.duration;
      audio.currentTime = (clickX / width) * duration;
    }

    function renderPlaylist() {
      playlistList.innerHTML = '';
      TRACKS.forEach((track, index) => {
        const isActive = index === currentTrackIndex;
        const isPlayingActive = isActive && isPlaying;

        const li = document.createElement('button');
        li.className = `w-full px-6 py-4 flex items-center gap-4 hover:bg-neutral-800 transition-colors ${isActive ? 'bg-neutral-800' : ''}`;
        li.innerHTML = `
          <div class="relative w-12 h-12 rounded-lg overflow-hidden flex-shrink-0">
            <img src="${track.artwork}" class="w-full h-full object-cover" />
            ${isPlayingActive ? `
              <div class="absolute inset-0 bg-black/50 flex items-center justify-center">
                <div class="flex gap-1">
                  <div class="w-1 h-3 bg-white animate-pulse-bar" style="animation-delay: 0ms"></div>
                  <div class="w-1 h-3 bg-white animate-pulse-bar" style="animation-delay: 150ms"></div>
                  <div class="w-1 h-3 bg-white animate-pulse-bar" style="animation-delay: 300ms"></div>
                </div>
              </div>
            ` : ''}
          </div>
          <div class="flex-1 text-left">
            <p class="text-sm font-medium ${isActive ? 'text-white' : 'text-neutral-300'}">${track.title}</p>
            <p class="text-xs text-neutral-500">${track.artist}</p>
          </div>
        `;
        li.addEventListener('click', () => {
          playTrack(index);
          playlistPanel.style.display = 'none';
        });
        playlistList.appendChild(li);
      });
    }

    // ========== EVENTOS ==========
    audio.addEventListener('loadedmetadata', () => {
      durationEl.textContent = formatTime(audio.duration);
    });

    audio.addEventListener('timeupdate', updateProgress);

    audio.addEventListener('ended', () => {
      if (repeatMode === 'one') {
        audio.currentTime = 0;
        audio.play();
      } else if (repeatMode === 'all' || currentTrackIndex < TRACKS.length - 1) {
        nextTrack();
      } else {
        isPlaying = false;
        updatePlayButton();
      }
    });

    playBtn.addEventListener('click', togglePlay);
    prevBtn.addEventListener('click', prevTrack);
    nextBtn.addEventListener('click', nextTrack);
    progressContainer.addEventListener('click', setProgress);
    volumeSlider.addEventListener('input', () => {
      audio.volume = volumeSlider.value;
      isMuted = volumeSlider.value == 0;
      volumeIconHigh.style.display = isMuted ? 'none' : 'block';
      volumeIconMuted.style.display = isMuted ? 'block' : 'none';
    });
    volumeBtn.addEventListener('click', toggleMute);
    repeatBtn.addEventListener('click', toggleRepeat);
    shuffleBtn.addEventListener('click', toggleShuffle);
    playlistBtn.addEventListener('click', () => {
      renderPlaylist();
      playlistPanel.style.display = 'block';
      lyricsPanel.style.display = 'none';
    });
    lyricsBtn.addEventListener('click', () => {
      lyricsPanel.style.display = 'block';
      playlistPanel.style.display = 'none';
    });
    closePlaylist.addEventListener('click', () => playlistPanel.style.display = 'none');
    closeLyrics.addEventListener('click', () => lyricsPanel.style.display = 'none');
    artworkContainer.addEventListener('mousemove', handleMouseMove);
    artworkContainer.addEventListener('mouseleave', handleMouseLeave);

    // ========== INICIALIZAÇÃO ==========
    loadTrack(currentTrackIndex);
    renderPlaylist();
  </script>
</body>
</html>




















